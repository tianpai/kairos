generator client {
    provider = "prisma-client-js"
    output   = "../node_modules/.prisma/client"
}

datasource db {
    provider = "sqlite"
    url      = env("DATABASE_URL")
}

model Company {
    id              Int              @id @default(autoincrement())
    name            String           @unique
    jobApplications JobApplication[]

    @@map("companies")
}

model JobApplication {
    id                String   @id @default(uuid())
    companyId         Int
    position          String
    dueDate           DateTime
    matchPercentage   Int
    templateId        String
    jobDescription    String?
    checklist         Json?
    originalResume    String?
    parsedResume      Json?
    tailoredResume    Json?
    workflowStatus    String?
    workflowSteps     Json?
    status            String   @default("active")
    applicationStatus String?
    jobUrl            String?
    createdAt         DateTime @default(now())
    updatedAt         DateTime @updatedAt

    company Company @relation(fields: [companyId], references: [id], onDelete: Cascade)

    @@map("job_applications")
}
